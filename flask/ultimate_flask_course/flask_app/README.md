                ______________________________________                Setting Up A Flask Virtual Enviroment                 ______________________________________- Create a directory    * Mine is in  bin2rong/flask/ultimate_flask_course/flask app- We will create a virtual enviroment     * This will contain all the needed installments to be contained in one enviroment. So it doesnt affect any other enviroments- Now once we are in our destined enviroment in our terminal, we will enter in the following;   FOR MAC:         >> python3 -m venv env                                * VENV stands for "Virtual Enviroment"                * Typical name: 'env' for enviroment- If the install was successful then a folder called "env" should appear within your destined directory, within it you will see the following directories;        1.bin        2.include        3.lib - Now we must activate our virtual enviroment;         >>  source env/bin/activate        * If activation was successful then you termianl will appear like so;            (env) (base) edgars-iMac :: flask/ultimate_flask_course/flask_app ‹master*› »                 * As you can see in the far left you will see what you named your enviroment in parenthases- Now we need to install Flask    >> pip install flask- A file will need to be created in our flask app directory         >> app.py- Since "app.py" will be our main app file, We re going to set an enviroment. This will allow Flask to which file to look for when it wants to run     >> set FLASK_APP=app.py # Now we will move over to our app.py file__________  app.py__________from flask import Flask    * flask = Libary     * Flask = class     app = Flask(__name__)    * Flask(__name__) = the current module you are working in which is app.py@app.rout('/<name>')        * The route, which is the URL endpoint "for your app"    * <name> allows for a name, this is basically  a placeholder. And any placeholder here will need to placed in your index function below as a parameterdef index(name):           * Our function, the name we give it is the base URL for whatever our site is       * the 'name' prarameter return '<h1 {} ><h1>'.format(name)     * This will be what is presented on our webpage     * {} will act as a placeholder for our parameter    * .format will create a hiearchy of which parameters should go in which placeholder  __________  end app.py  __________- And to run your app in your terminal, enter in the following:    >> flask run    * And since we "set FLASK_APP=app.pys", Flask run knows what to run- If the run was successful then the following will appear; * Environment: production   WARNING: This is a development server. Do not use it in a production deployment.   Use a production WSGI server instead. * Debug mode: off * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)- Copy http://127.0.0.1:5000/<name of your choosing> and place it in your browserComplete code for simple app below____________________________________-from flask import Flask app = Flask(__name__)@app.route('/<name>')def index(name):    return '<h1>Is {} An Art Fag!<h1>'.format(name)                                 ______________________________________                     Two Ways of Running Flask                ______________________________________- The first way of having your Flask app run is with the followingif __name__ == '__main__':    app.run()- With this you can run the app through the terminal with the following;    >> python app.py    * Since the name of our app file is "app.py"        So you code in its entirety should like this before you excecute the above                    from flask import Flask                     app = Flask(__name__)                                        @app.route('/<name>')                    def index(name):                        return '<h1>{} Is An Art Fag!<h1>'.format(name)                                         if __name__ == '__main__':                        app.run()- And the second way to run your code is flask run      >> flask run     * But what if you wanted run different py file called script.py, you will need to set up a new enviroment for said file;       >> export FLASK_APP=script.py    * Once env has exported our new file     >> flask run- Now in these examples we have left debug mode off, in order to turn debug mode on, you will need to enter in the following (note this will need to be done before runninh Flask);     >> export FLASK_DEBUG=1     then     >> flask run    * And once ran you will see the following appear;        * Debug mode: on <-- AS YOU CAN SEE DEBUG IS ON!        * Running on http://127.0.0.1:5000/ (Press CTRL+C to quit)        * Restarting with stat        * Debugger is active!        * Debugger PIN: 275-183-351                ______________________________________                            Intro to Routes                ______________________________________- Routes are an essential component to your app     * This will allow people to access differnt areas of your app or the differnt parts of your API - Say we wanted to create a route to our "home" we would include the add the following to our app.py;@app.route('/home') def home():    return '<h1>You are now on the home page...Art Fag <h1>'@app.route('/home')     * As you can see we have added home to our route (/). This will a create a path to THIS PAGE, THIS DIRECTORY, "home"- Once added, flask run in terminal and copy paster http://127.0.0.1:5000/ into your browser search which should bring up                     Art Fag- Now to access our new 'home' route, enter the following in your browser url or just add;             http://127.0.0.1:5000/home- Now in the example below we re going to return a json, and in order to do this we have to import the 'jsonify' function;from flask import Flask, jsonify - Then we will need to create a 'json' route@app.route('/json')def json():    return jsonify({'key' : 'values', 'listkey' : [1,2,3]})    * will then create a route to a jsonified version of Python data structures. And to access this you will need to enter the following in your browser URL;         http://127.0.0.1:5000/json        * which will then take you to a page which shows the followin;            {              "key": "values",               "keyTwo": [                1,                 2,                 3              ]            }_________________________The comlete code below:__________________________from flask import Flask, jsonifyapp = Flask(__name__)@app.route('/')def index():    return ('<h1>This is the index page</h1>')@app.route('/json')def json():    return jsonify({'key' : 'values', 'listkey' : [1,2,3]})@app.route('/home')def home():    return ('<h1>Welcome Art Fag! This is the home page</h1>')if __name__ == '__main__':    app.run(debug=True)                    ______________________________________                                Route Methods                    ______________________________________- By default the end points the app.route decorator are for GIT REQUEST only         @app.route('/')- But say you want to make POST request, a 404 error message will be sent your way. In order for this to be done you will have to update the method of desired routed, to allow different http requests to come in - So lets change the method for our JSON page@app.route('/json', methods=['GET'])def json():    return jsonify({'key' : 'values', 'listkey' : [1,2,3]})    * As you can see we have added a method to our route, GET is the defaul which again only allows GET PULL requests, we will need to add POST to make pull requests     @app.route('/', methods=['POST'])         - Though doing this will only allow POST requests, in order to do both we will need to add GET and POST like so;    @app.route('/', methods=['GET','POST'])- By including the above you will now be able to GET and POST with zero 405 messages to appear - Now APIs offer a variety of request (PUT,PATCH,DELETE,COPY, ETC}) so be sure to add them to your methods list                    ______________________________________                                Route Variable                    ______________________________________- A typical feature of a web app is to allow users to input custom information. And in order to do this we will need to pass VARIABLES in the URL iteself. So we will repalce our '/route'from flask import Flask, jsonifyapp = Flask(__name__)@app.route('home/<name>', methods=['GET','POST'])def home(name):    return '<h1>Welcome {}! You Are Now an Art Fag! This is the home page</h1>'.format(name)- So what we ve added to our route is a custom variable, which when. accessing our rout through our URL we can / any tag which will direct us to our page. IT IS IMPORTANT that the function parameter MATCHES our route variable ('name')- Now we want our custom variable to appear on our page, we will need to add a placeholder to our sting({}) and include .format()return '<h1>Welcome {}! You Are Now an Art Fag! This is the home page</h1>'.format(name)- Though what if we left out the <name> from our URL, well then we would get a 404 error. What we would need is a default route. @app.route('/home', methods=['GET','POST'], defaults = {'name' : 'Defualt'})     - As you can see above we have add another (route) decorator above the one below.    - As you can see its similar to the one below, thought we have left out the /<name>    - At the end you can see that we have added a new parameter titled 'defaults'                      defaults = {'key' : 'value'}                          - the parameter takes in a Python dictionary and the key will be the name of the variable ('name')                     - And the value will be ne a 'default' value                    - when you run this in your browser it will run a default value when a specific value is not entered in your routefrom flask import Flask, jsonifyapp = Flask(__name__)@app.route('/', methods=['GET','POST'])def index():    return '<h1>This is the index page</h1>'@app.route('/json', methods=['GET','POST'])def json():    return jsonify({'key' : 'values', 'listkey' : [1,2,3]})@app.route('/home', methods=['GET','POST'], defaults = {'name' : 'Defualt'})@app.route('/home/<name>', methods=['GET','POST'])def home(name):    return '<h1>Welcome {}! You Are Now an Art Fag! This is the home page</h1>'.format(name)if __name__ == '__main__':    app.run(debug=True)- Dont know if the below information is really needed- What if you wanted to enter in a number as opposed to say, in that case we would need to implemnet types. What we do is add the type and colon to our variable name like so;app.route('/home/<int:name>')    - This will assign a type to our variable                    ______________________________________                            Request Query String                    ______________________________________# (Query is another word for question. ... For example, if you need additional information from someone, you might say, "I have a query for you.")# Aside from passing things throught the URL there are other ways of passing data into the app# In this section we will see how to pass in data using a query string# To get started on out query we will add the following to our app    @app.route('/query')    def query():        return '<h1>You Are on The Query Page</h1>'# On`ce we refresh our web browser we will then see the following appear on our page, the following will appear;            You Are on The Query Page# now if you go to the URL, you will seehttp://127.0.0.1:5000/query# And if we were to add the following to it, nothing would happenhttp://127.0.0.1:5000/query?name=sara# Nothing would happen, cause its not reading that query string. To make this work the first thing we gotta do is import the request from flask;from flask import Flask, jsonify, request# The we are gonna have to add to add two variables which are going to hold the# the values from the query string    name = request.args.get('name')    location = request.args.get('location')# To get thesse values we use the request object from flask and args and then g# get. then we pass in the keys of what we wanna get     request.args.get('name')    request.args.get('location')# Then we insert placeholders within our string and finish it with a .formatreturn '<h1>Greetings {}, you have landed on the query page from {}</h1>'.format(name,location)# Now if we go to our web browser and enter the following into our URLhttp://127.0.0.1:5000/query?name=Edgar&location=California# We should now see the following appear on our page;Greeting Edgar, you have landed on the query page from California                    ______________________________________                                Request From Data                    ______________________________________- Now we are going save and retrieve from data, this is what we will be adding to our app.py@app.route('/theform')def theform():    return '''<form method="POST" action="/query">                <input type="text" name="name">                <input type="submit" value="submit">              </form>'''    - Then we will have, have to creating landing page for our form above.@app.route('/query', methods=['POST','GET']) def query():    name = request.form.get('name')    return '<h1>Greetings {}, you have landed on the query page!</h1>'.format(name)# http://127.0.0.1:5000/info?name=Edgar&location=California# OUTPUT: Greetings Edgar, you have landed on the query page from California                    ______________________________________                                Request Json Data                    ______________________________________- Using PostmanPOST - REQUEST - http://127.0.0.1:5000//postmanjson - SEND- then , POST request > Body > raw > (make sure the drop down to the far right is on JSON). Enter in the info. Enter in the following data;{"name" : "Edgar", "location": "Japan", "randomlist": ["pizza","chocolate","Soda"," weed"]}- and SEND (in the top right corner) - Though nothing will happen since your app isnt actually proccessing the data. We will have to go to our '/postmanjson;' rounte in our code@app.route('/postmanjson',methods=['POST','GET'])# Make sure our methods has 'POST' so that we can send data from postmadef postmanjson():    data = request.get_json()# data this is going to take the incoming json object from Postman and# turn it into Python data structures,arrays will be converted into lists    name = data['name']# name 'variable' which carries the key/object    location = data['location']# location 'variable' which carries the key/object    randomlist = data['randomlist']# Creareturn jsonify({'key' : 'values','name':  name, 'location': location, 'Random Item': randomlist})# Our return we include some keys to the json object that is returned - Once the above has been added, we will go back to POSTMAN and once again send the raw data and the follwoing should appear at the bottom of our page;  "Random Item": [    "pizza",     "chocolate",     "Soda",     " weed"  ],   "key": "values",   "location": "Japan",   "name": "Edgar"}                    ______________________________________                            Incoming Method Requests                    ______________________________________- There are multiple ways of sending data@app.route('/theform', methods=['POST','GET']) # <----- BUGdef theform():    if request.method == 'GET':        return '''<form method="POST" action="/theform">                        <input name="name" type="text">                        <input type="submit" value="Submit">                      </form>'''               @app.route('/query', methods=['POST','GET']) def query():    name = request.form.get('name')    return '<h1>Greetings {}, you have landed on the query page!</h1>'.format(name)OR@app.route('/theform', methods=['POST','GET']) # <----- BUGdef theform():    if request.method == 'GET':# The if statement acts as a GET handle        return '''<form method="POST" action="/theform">                        <input name="name" type="text">                        <input type="submit" value="Submit">                      </form>'''    else:# The else statement acts like a POST handle        name = request.form.get('name')                return '<h1>Greetings {}, you have landed on the query page!</h1>'.format(name)# This cant method can be used as a way to consolidate your code, you can do this as oppose to having a GET route and a seperate route for POST                    ______________________________________                           Redirects and the URL                    ______________________________________- Now we will figure out how to direct a user from page to another once they have completed the task- First off we will need to import URL_FOR is is the function of getting the URL for a particular route- second, we will need to import redirect which will, as you guessed it, handle the redirect from said rout# In the example below we will start off on our /theform page, enter in the requested info and the be redirected to our /home page@app.route('/theform', methods=['POST','GET'])def theform():    if request.method == 'GET':        return '''<form method="POST" action="/theform">                        <input name="name" type="text">                        <input type="submit" value="Submit">                      </form>'''    else:        name = request.form.get('name')        return redirect(url_for('home',name=name))                     ______________________________________                                Configuration                    ______________________________________- configuration value is 'debug'if __name__ == '__main__':    app.run(debug=True)- Though rather than in icluding debug=True like above, we can being it in through the app.config dictionary. Along with other configsapp.config['DEBUG'] = True# And to addd multiple update keys;app.config['DEBUG'] = Trueapp.config['TESTING'] = True# For a list of FLASK configs https://flask.palletsprojects.com/en/0.12.x/config/                    ______________________________________                                    Sessions                    ______________________________________- We re gonna need to configure a particular value to use sessions- Sessions in a web app to keep data persistant acrosse routes/pages # EXAMPLE:    You log into a website, the site needs to know that its YOU going through the site, regardless of what pages you go to. This is where cookies come in handy, the app will go into this cookie to retrieve data of who you are- Now we will be bringing in sessions through the cofig dictionary;app.config['SECRET_KEY'] = 'SSHH'# NEVER PUT ANYTHING SENSETIVE INSIDE OF A SESSION- once we have our config set up then we will need to import sesssions; import session- Now we will add the session dict to our /home route@app.route('/home', methods=['GET','POST'], defaults = {'name' : 'Defualt'})@app.route('/home/<string:name>', methods=['GET','POST'])def home(name):    session['name'] = name# SO now when we enter a 'name' through the /theform route and our directed, seesions, our cookie will now have store that 'name' value and know that is who is perusing the site     return '<h1>Welcome {}! You Are Now an Art Fag! This is the home page</h1>'.format(name)- Once the above has been added then all the routes in our code will have accesss to our session- For a route to read the session; @app.route('/info') def info():    name = session['name']    # name = request.args.get('name')    # location = request.args.get('location')    return '<h1>Greetings {}, you have landed on the query page</h1>'.format(name)- Now you gotta be careful when modifying a session, for you can run into a number of error if a session is modified# EXAMPLE: Say that when you land on the index page (/). The name is popped off and NOT replaced. session.pop('name', None)# When going back to the /info page, you will be greeted with a SHIT ERROR. To avoid this we will need to use if/else        if 'name' in session:           name = session['name']    else:        name = '(Wait...who are you?)'# So if the 'name' is within the session, then we will continue on with the name. If not (else) then use(print) the backup message ('(Wait...who are you?)') as a value for name# Now to get session to use our unique name we will need to go back to /theform page and enter it again. Though remeber that any page with the pop method will remove/replace our session                    ______________________________________                                DEBUG MODE                    ______________________________________- While debug mode is ON, a DEBUG page will appear with a description of what is wrong when we have reached a bug in the code# SO DEBUG MODE REALLY HELPS ASSHOLE! - Sometimes when on this page you will be asked to provide a PIN which can be found in our terminal under 'Debugger Pin' 166-239-698                ______________________________________                            Templates                 ______________________________________- Say within one of your routes you needed to return a lot of html, this is where templates come in handy.- First off will need to import render template;    import render_template- Now once we have imported render_templates, we will proceed to creating a 'templates' directory in our app ENV and once we do that we will create an html file within this new templates directory- And within the new html file (ours is: index.html) we will include the following and then delete it from our app.py file<form method="POST" action="/theform">    <input name="name" type="text">    <input type="submit" value="Submit"></form>'- Now what if we wanted to add a header so that it would appear above our input/submit box<h1>Please enter your name</h1><form method="POST" action="/theform">    <input name="name" type="text">    <input type="submit" value="Submit"></form>'                 ______________________________________                            Template Variable                ______________________________________- There are a number of things that can be stored within a template, one important thing is a variable- In Python;    return render_template('info.html', name=name)- and in your HTML your NEW info.html file;        <h1>Welcome {{ name }}! You Are Now an Art Fag! This is the home page</h1>                ______________________________________                            Template Conditions                ______________________________________- Variables arent the only things that can be added to a template, a user can even add CONDITIONS (like IF and ELSE statements)Starting example;- Firt example will take place within 'Template variable' syntax within app.py@app.route('/home', methods=['GET','POST'], defaults = {'name' : 'Defualt'})@app.route('/home/<string:name>', methods=['GET','POST'])def home(name):    session['name'] = name    - The first thing we do is add display to our return render_template, and set it to True;    > return render_template('info.html', name=name, display = True)- Once display is set top True, we will then move over to our (info.html) template and add the follwoing if statement;- Beginning of if (conditional) statements    {%if display%}  - if display is True the display the following on page        <h2>Display is ON</h2>- eles if display is off, diplay off on page    {% elese %}        <h2>Display is OFF</h2>- End of conditional statements    {%endif%}